name = "sc-api"
main = "src/index.ts"
compatibility_date = "2024-09-23"

[vars]
ENVIRONMENT = "production"
CORS_ORIGIN = "https://siliconcrane.com"
API_VERSION = "1.2.0"

[[d1_databases]]
binding = "DB"
database_name = "sc-db"
database_id = "29424de8-2f7c-400f-bd23-03f8d2f390bc"

[[r2_buckets]]
binding = "ASSETS"
bucket_name = "sc-assets"

# Email notifications via Resend (set RESEND_API_KEY via wrangler secret put)
# Sign up at https://resend.com and add siliconcrane.com domain

[env.preview]
vars = { ENVIRONMENT = "preview", CORS_ORIGIN = "*", API_VERSION = "1.2.0" }

[[env.preview.d1_databases]]
binding = "DB"
database_name = "sc-db"
database_id = "29424de8-2f7c-400f-bd23-03f8d2f390bc"

[[env.preview.r2_buckets]]
binding = "ASSETS"
bucket_name = "sc-assets"

# Secrets (set via `wrangler secret put`):
# SC_API_KEY
# STRIPE_SECRET_KEY
# STRIPE_WEBHOOK_SECRET
# GA4_API_SECRET
# GA4_MEASUREMENT_ID
# KIT_API_KEY
# TURNSTILE_SECRET_KEY (Phase 2)
